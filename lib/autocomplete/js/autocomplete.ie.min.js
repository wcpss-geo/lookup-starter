var Autocomplete=function(){"use strict";var t=function(t,e){for(var i in e)"addClass"===i?n(t,"add",e[i]):"removeClass"===i?n(t,"remove",e[i]):t.setAttribute(i,e[i])},e=function(t){return(t.firstElementChild||t).textContent.trim()},i=function(t,e){t.scrollTop=t.offsetTop-e.offsetHeight},n=function(t,e,i){return t.classList[e](i)},s=function(e,i){t(e,{"aria-activedescendant":i||""})},o=function(t,e,i,n){var s=n.previousSibling,o=s?s.offsetHeight:0;if("0"==t.getAttribute("aria-posinset")&&(n.scrollTop=t.offsetTop-function(t,e){var i=document.querySelectorAll("#"+t+" > li:not(."+e+")"),n=0;return[].slice.call(i).map((function(t){return n+=t.offsetHeight})),n}(e,i)),t.offsetTop-o<n.scrollTop)n.scrollTop=t.offsetTop-o;else{var a=t.offsetTop+t.offsetHeight-o;a>n.scrollTop+n.offsetHeight&&(n.scrollTop=a-n.offsetHeight)}},a=function(t){return document.createElement(t)},r=function(t){return document.querySelector(t)},c=function(t,e,i){t.addEventListener(e,i)},u=function(t,e,i){t.removeEventListener(e,i)},d=27,l=13,h=38,f=40,v=9;return function(m,p){var b,x=this,k=p.delay,y=void 0===k?500:k,C=p.clearButton,j=void 0===C||C,w=p.howManyCharacters,V=void 0===w?1:w,g=p.selectFirst,A=void 0!==g&&g,O=p.insertToInput,I=void 0!==O&&O,J=p.showAllValues,N=void 0!==J&&J,S=p.cache,T=void 0!==S&&S,$=p.disableCloseOnSelect,q=void 0!==$&&$,z=p.classGroup,B=p.classPreventClosing,G=p.classPrefix,P=p.ariaLabelClear,D=p.onSearch,E=p.onResults,F=void 0===E?function(){}:E,H=p.onSubmit,K=void 0===H?function(){}:H,L=p.onOpened,M=void 0===L?function(){}:L,Q=p.onReset,R=void 0===Q?function(){}:Q,U=p.onRender,W=void 0===U?function(){}:U,X=p.onClose,Y=void 0===X?function(){}:X,Z=p.noResults,_=void 0===Z?function(){}:Z,tt=p.onSelectedItem,et=void 0===tt?function(){}:tt;this.t=function(){var e,i,n,s,o;x.i(),e=x.s,i=x.o,n=x.u,s=x.l,o=x.h,t(i,{id:n,tabIndex:"0",role:"listbox"}),t(s,{addClass:o+"-results-wrapper"}),s.insertAdjacentElement("beforeend",i),e.parentNode.insertBefore(s,e.nextSibling),c(x.s,"input",x.v),x.m&&c(x.s,"click",x.v),x.p({element:x.s,results:x.o})},this.k=function(t,e){x.C&&("update"===t?x.s.setAttribute(x.j,e.value):"remove"===t?x.s.removeAttribute(x.j):x.s.value=x.s.getAttribute(x.j))},this.v=function(t){var e=t.target,i=t.type;if("true"!==x.s.getAttribute("aria-expanded")||"click"!==i){var n=e.value.replace(x.V,"\\$&");x.k("update",e);var s=x.m?0:x.g;clearTimeout(x.A),x.A=setTimeout((function(){x.O(n.trim())}),s)}},this.I=function(){var e;t(x.s,{"aria-owns":x.J+"-list","aria-expanded":"false","aria-autocomplete":"list","aria-activedescendant":"",role:"combobox",removeClass:"auto-expanded"}),n(x.l,"remove",x.N),x.S(r("."+x.T)),(0==(null==(e=x.$)?void 0:e.length)&&!x.q||x.m)&&(x.o.textContent=""),x.B=x.G?0:-1,x.P()},this.O=function(t){x.D=t,x.F(!0),function(t,e){void 0===t&&(t=!1),t&&(n(t,"remove","hidden"),c(t,"click",e))}(x.H,x.destroy),0==t.length&&x.K&&n(x.H,"add","hidden"),x.L>t.length&&!x.m?x.F():x.M({currentValue:t,element:x.s}).then((function(e){var i=x.s.value.length,s=e.length;x.$=Array.isArray(e)?e:JSON.parse(JSON.stringify(e)),x.F(),x.R(),0==s&&0==i&&n(x.H,"add","hidden"),0==s&&i?(n(x.s,"remove","auto-expanded"),x.I(),x.U({element:x.s,currentValue:t,template:x.W}),x.X()):(s>0||function(t){return t&&"object"==typeof t&&t.constructor===Object}(e))&&(x.B=x.G?0:-1,x.W(),x.X())})).catch((function(){x.F(),x.I()}))},this.F=function(t){return x.s.parentNode.classList[t?"add":"remove"](x.Y)},this.R=function(){return n(x.s,"remove",x.Z)},this.X=function(){c(x.s,"keydown",x._),c(x.s,"click",x.tt),c(document,"click",x.et),["mousemove","click"].map((function(t){c(x.o,t,x.it)}))},this.W=function(e){t(x.s,{"aria-expanded":"true",addClass:x.h+"-expanded"}),x.o.textContent="";var s=0===x.$.length?x.nt({currentValue:x.D,matches:0,template:e}):x.nt({currentValue:x.D,matches:x.$,classGroup:x.st});x.o.insertAdjacentHTML("afterbegin",s),n(x.l,"add",x.N);var o=x.st?":not(."+x.st+")":"";x.ot=document.querySelectorAll("#"+x.u+" > li"+o),function(e){for(var i=0;i<e.length;i++)t(e[i],{role:"option",tabindex:"-1","aria-selected":"false","aria-setsize":e.length,"aria-posinset":i})}(x.ot),x.rt({type:"results",element:x.s,results:x.o}),x.ct(),i(x.o,x.l)},this.et=function(t){var e=t.target,i=null;(e.closest("ul")&&x.ut||e.closest("."+x.dt))&&(i=!0),e.id===x.J||i||x.I()},this.ct=function(){if(x.S(r("."+x.T)),x.G){var e=x.o.firstElementChild,i=x.st&&x.$.length>0&&x.G?e.nextElementSibling:e;x.lt({index:x.B,element:x.s,object:x.$[x.B]}),t(i,{id:x.ht+"-0",addClass:x.T,"aria-selected":"true"}),s(x.s,x.ht+"-0")}},this.tt=function(){x.o.textContent.length>0&&!n(x.l,"contains",x.N)&&(t(x.s,{"aria-expanded":"true",addClass:x.h+"-expanded"}),n(x.l,"add",x.N),i(x.o,x.l),x.ct(),x.rt({type:"showItems",element:x.s,results:x.o}))},this.it=function(t){t.preventDefault();var e=t.target,i=t.type,s=e.closest("li"),o=null==s?void 0:s.hasAttribute("role"),a=x.T,c=r("."+a);s&&o&&!e.closest("."+x.dt)&&("click"===i&&x.ft(s),"mousemove"!==i||n(s,"contains",a)||(x.S(c),x.vt(s),x.B=x.pt(s),x.lt({index:x.B,element:x.s,object:x.$[x.B]})))},this.ft=function(t){t&&0!==x.$.length?(x.K&&n(x.H,"remove","hidden"),x.s.value=e(t),x.bt({index:x.B,element:x.s,object:x.$[x.B],results:x.o}),x.ut||(x.S(t),x.I()),x.k("remove")):!x.ut&&x.I()},this.pt=function(t){return Array.prototype.indexOf.call(x.ot,t)},this._=function(t){var i=t.keyCode,o=n(x.l,"contains",x.N),a=x.$.length+1;switch(x.xt=r("."+x.T),i){case h:case f:if(t.preventDefault(),a<=1&&x.G||!o)return;if(i===h?(x.B<0&&(x.B=a-1),x.B-=1):(x.B+=1,x.B>=a&&(x.B=0)),x.S(x.xt),x.B>=0&&x.B<a-1){var c=x.ot[x.B];x.q&&o&&(x.s.value=e(c)),x.lt({index:x.B,element:x.s,object:x.$[x.B]}),x.vt(c)}else x.k(),s(x.s),x.lt({index:null,element:x.s,object:null});break;case l:t.preventDefault(),x.ft(x.xt);break;case v:case d:t.stopPropagation(),x.I()}},this.vt=function(e){var i=x.ht+"-"+x.pt(e);t(e,{id:i,"aria-selected":"true",addClass:x.T}),s(x.s,i),o(e,x.u,x.st,x.o)},this.S=function(e){e&&t(e,{id:"",removeClass:x.T,"aria-selected":"false"})},this.i=function(){x.K&&(t(x.H,{class:x.h+"-clear hidden",type:"button",title:x.kt,"aria-label":x.kt}),x.s.insertAdjacentElement("afterend",x.H))},this.destroy=function(){x.K&&n(x.H,"add","hidden"),x.s.value="",x.s.focus(),x.o.textContent="",x.I(),x.R(),x.yt(x.s),u(x.s,"keydown",x._),u(x.s,"click",x.tt),u(document,"click",x.et)},this.J=m,this.s=document.getElementById(m),this.M=(b=D,Boolean(b&&"function"==typeof b.then)?D:function(t){var e=t.currentValue,i=t.element;return Promise.resolve(D({currentValue:e,element:i}))}),this.nt=F,this.p=W,this.bt=K,this.lt=et,this.rt=M,this.yt=R,this.U=_,this.P=Y,this.g=y,this.L=V,this.K=j,this.G=A,this.q=I,this.m=N,this.st=z,this.dt=B,this.kt=P||"clear the search query",this.h=G?G+"-auto":"auto",this.ut=q,this.C=T,this.u=this.h+"-"+this.J+"-results",this.j="data-cache-auto-"+this.J,this.Y=this.h+"-is-loading",this.N=this.h+"-is-active",this.T=this.h+"-selected",this.ht=this.h+"-selected-option",this.Z=this.h+"-error",this.V=/[|\\{}()[\]^$+*?.]/g,this.A=null,this.l=a("div"),this.o=a("ul"),this.H=a("button"),this.t()}}();
